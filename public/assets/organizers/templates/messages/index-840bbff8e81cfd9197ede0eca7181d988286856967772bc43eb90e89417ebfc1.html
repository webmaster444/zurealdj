<div class="container chat-view"><div class="row"><div class="chat-sidebar" ng-class="{active: !current_event}"><div class="chat-search"><div class="inbox">Inbox</div><div class="searchbox"><i class="fa fa-search"></i><input ng-model="q" type="text" /></div></div><ul dj-scroll=""><li class="blank-chat" ng-show="events.length == 0">Your chats will be here</li><li ng-repeat="event in events track by $index" ng-show="event.djs.length"><div class="chat-user cursor-pointer" ng-click="event.dropdownOpen = !event.dropdownOpen"><img class="eventImg" ng-src="{{event.image}}" /><div class="chat-user-name"><a class="chat-user-name event-title">{{ event.title }}</a><div class="unread-message-count">{{ event.djs.length }} DJ's</div></div><div class="unread-messages" ng-if="event.unread_messages_count &gt; 0"><div class="unread-messages-count">{{ event.unread_messages_count }}</div></div><i class="fa" ng-class="{&#39;fa-chevron-down&#39;: !event.dropdownOpen, &#39;fa-chevron-up&#39;: event.dropdownOpen}"></i></div><ul ng-class="{ &#39;selectedEvent&#39;: event.dropdownOpen}" ng-repeat="dj in event.djs" ng-show="event.dropdownOpen"><li ng-click="setCurrentEvent(event, dj)"><div class="chat-user" ng-class="{&#39;current-chat&#39;: event == current_event &amp;&amp; dj == current_dj }"><img ng-src="{{dj.avatar}}" style="background-color: white; border-radius: 100%" /><i class="fa fa-circle" ng-show="dj.online"></i><a class="chat-user-name">{{ dj.name }}</a><div class="dj-gray-text last-date" ng-if="dj.last_message">{{ dj.last_message.date }}</div><div class="unread-message" ng-class="{&#39;unread&#39; : (dj.last_message.read == false &amp;&amp; dj.last_message.incoming == true)}" ng-if="dj.last_message"><img ng-src="{{ dj.last_message.user_avatar }}" /><div class="dj-gray-text">{{ dj.last_message.body }}</div></div><div class="unread-messages" ng-if="dj.last_message"><div class="unread-messages-count" ng-if="dj.unread_messages_count &gt; 0">{{ dj.unread_messages_count }}</div></div></div></li></ul><div class="show-more small" ng-show="eventsCount &amp;&amp; events.length &lt; eventsCount"><a class="show-more small" ng-click="showMoreEvents()">Show More</a></div></li></ul></div><div class="chat-body" ng-class="{active: current_event, &#39;show-event&#39;:event.show}"><div class="chat-header"><div class="dj-gray-text" ng-hide="current_event">Choose event to discuss</div><div class="receiver" ng-show="current_event"><a class="back-to-list-icon" ng-click="setCurrentEvent(null, null)"><img src="/images/icons/ic-left-purple.svg" /></a><div class="imgContain"><img ng-src="{{current_dj.avatar}}"><i class="fa fa-circle" ng-show="current_dj.online"></i></img></div>{{ current_dj.name }}<i class="fa" ng-class="{&#39;fa-chevron-down&#39;: !event.show, &#39;fa-chevron-up&#39;: event.show}" ng-click="event.show = !event.show"></i></div><div class="eventChat" ng-class="{&#39;show-event&#39;:event.show}" ng-show="current_event"><a class="dj-black-link">{{ current_event.title }}</a><img ng-src="{{current_event.image}}" /></div></div><div class="chat-discussion" dj-scroll=""><div class="show-more small" ng-show="messages.length &lt; messagesCount"><a class="show-more small" ng-click="retrieveOldMessages()">Show More</a></div><div class="blank-chat" ng-hide="current_event">Your chat history will be here</div><div class="chat-message right {{ !message.read &amp;&amp; message.incoming? &#39;unread cursor-pointer&#39; : &#39;&#39; }}" ng-class="{&#39;own-message-box&#39; : !message.incoming, &#39;user-change&#39; : message.incoming != messages[$index-1].incoming || message.longAgo, &#39;short&#39; : message.body.length &lt; 9}" ng-click="markAsRead(message)" ng-repeat="message in messages track by $index"><img class="message-avatar" ng-class="{&#39;own-msg-ava&#39; : !message.incoming }" ng-show="(message.longAgo || message.incoming != messages[$index-1].incoming)" ng-src="{{message.avatar}}" /><div class="message" ng-class="{&#39;own-message&#39; : !message.incoming }"><a class="pink-link" ng-class="{&#39;recent&#39; : !message.longAgo }">{{ message.name }}</a> <span class="dj-gray-text" ng-class="{&#39;own&#39; : !message.incoming , &#39;recent&#39;: !message.longAgo}">{{ message.date }}</span><div class="message-content" ng-class="{&#39;short&#39; : message.body.length &lt; 9}">{{ message.body }}</div></div></div></div><form class="chat-message-form" name="chatForm" ng-submit="send()"><input class="form-control message-input" name="message" ng-disabled="current_dj? false: true" ng-model="message" placeholder="Type a messageâ€¦" /><a ng-click="current_event? send() : false"><img ng-if="!message.length" src="/images/icons/ic-send-black-24-px.png" /><img ng-if="message.length" src="/images/icons/ic-send-black-active-24-px.png" /></a></form></div></div></div><div class="margin50"></div>